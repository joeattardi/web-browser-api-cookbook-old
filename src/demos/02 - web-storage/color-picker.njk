---
layout: "base.njk"
title: "Remembering an Input Value"
permalink: "/web-storage/color-picker.html"
eleventyNavigation:
  order: 1
  key: colorPicker
  title: "Remembering an Input Value"
  parent: webStorage
---

{% set description %}
  <p>
      Remember a simple input value in local storage.
  </p>
  <ul class="list-disc pl-6">
    <li>The picker tries to read a color from local storage when the page first loads. If one is found, it's set as the default color.</li>
    <li>When the color value changes, it is immediately written to local storage.</li>
  </ul>
{% endset %}

{% set css %}

.color-form {
  display: flex;
  flex-direction: column;
  font-size: 0.95em;
  font-weight: bold;
}

.color-form label {
  margin-bottom: 0.5em;
}
{% endset %}

{% set js %}
const colorPicker = document.querySelector('#colorPicker');

// Look for a previously saved color and set it, if found.
const savedColor = localStorage.getItem('savedColor');
if (savedColor) {
  colorPicker.value = savedColor;
}

// When the color is changed, save it to local storage.
colorPicker.addEventListener('change', () => {
  localStorage.setItem('savedColor', colorPicker.value);
});
{% endset %}

{% set html %}
<div class="color-form">
  <label for="colorPicker">Background color</label>
  <input type="color" id="colorPicker">
</div>
{% endset %}

{% set javascript %}
  {{ js | safe }}
{% endset %}

{% import 'code-block.njk' as codeBlock %}

{% set code %}
  {{ codeBlock.codeBlock(
    'Persistence', 
    'javascript', 
    'Manages persisting the color value to local storage.', 
    js) 
  }}

  {{ codeBlock.codeBlock(
    'Form', 
    'html', 
    'Basic form including a color picker.', 
    html) 
  }}
{% endset %}

{% include "demo.njk" %}