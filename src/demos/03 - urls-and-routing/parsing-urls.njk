---
layout: "base.njk"
title: "Parsing URLs"
permalink: "/urls-and-routing/parsing-urls"
eleventyNavigation:
  key: parsingUrls
  title: "Parsing URLs"
  parent: urlsAndRouting
---

{% set description %}
  <p>
      Enter a URL and click "Parse URL". The value is passed to the <code>URL</code> constructor, and the component parts of the parsed URL will be shown.
  </p>
{% endset %}

{% set js %}
const form = document.querySelector('form');
const results = document.querySelector('#results');

// The properties of the URL we want to show.
const urlProperties = [
  'host', 'hostname', 'href',
  'origin', 'pathname', 'protocol',
  'search'
];

form.addEventListener('submit', event => {
  event.preventDefault();

  const url = new URL(event.target.elements.url.value);
  event.target.elements.url.value = '';

  const card = document.querySelector('#url-card').content.cloneNode(true).firstElementChild;
  const urlDetails = card.querySelector('ul');
  card.querySelector('.url').textContent = url.toString();

  let details = '';
  urlProperties
    .filter(property => url[property].length)
    .forEach(property => {
      details += `
        <li><strong>${property}</strong>: ${url[property]}</li>
      `;
    });
    urlDetails.innerHTML = details;

  results.insertBefore(card, results.firstElementChild);
});
{% endset %}

{% set templateHtml %}
<template id="url-card">
  <div class="bg-gray-50 rounded my-4 p-2 px-4 border border-slate-300">
    <div class="mb-2">
      <h4 class="font-bold text-xl url"></h4>
    </div>
    <div class="card-body">
      <ul class="m-0"></ul>
    </div>
  </div>
</template>
{% endset %}

{% set layoutHtml %}
<form class="flex">
  <input 
    type="url"
    autofocus 
    name="url" 
    class="border border-slate-400 px-2 py-1 rounded w-full" 
    placeholder="Enter a URL..."
  >
  <button class="shrink-0 bg-slate-300 px-2 py-1 rounded ml-2">Parse URL</button>
</form>
<div id="results"></div>
{% endset %}

{% set html %}
{{ templateHtml | safe }}
{{ layoutHtml | safe  }}
{% endset %}

{% set javascript %}
  {{ js | safe }}
{% endset %}

{% import 'code-block.njk' as codeBlock %}

{% set code %}
  {{ codeBlock.codeBlock(
    'URL parsing', 
    'javascript', 
    'Parses the URL and renders its properties.', 
    js) 
  }}

  {{ codeBlock.codeBlock(
    'Form', 
    'html', 
    'Basic form layout.', 
    html) 
  }}

  {{ codeBlock.codeBlock(
    'Template', 
    'html', 
    'Template used to render URL details.', 
    layoutHtml) 
  }}
{% endset %}

{% include "demo.njk" %}